<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes" name="viewport" />
    <title>Notebook - Engineering Math Pro</title>
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <link
        href="https://fonts.googleapis.com/css2?family=Indie+Flower&amp;family=Patrick+Hand&amp;family=Caveat:wght@400;700&amp;family=Shadows+Into+Light&amp;family=Permanent+Marker&amp;family=Kalam:wght@300;400;700&amp;family=Architects+Daughter&amp;family=Fira+Code:wght@400;600&amp;display=swap"
        rel="stylesheet" />
    <!-- KaTeX for Math Rendering -->
    <link href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <!-- PDF.js for Lecture Mode 2.0 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <!-- Prism.js for Syntax Highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-java.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-c.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-cpp.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-sql.min.js"></script>
    <!-- PWA MANIFEST & SETTINGS -->
    <meta content="#2c3e50" name="theme-color" />
    <meta content="yes" name="apple-mobile-web-app-capable" />
    <meta content="black-translucent" name="apple-mobile-web-app-status-bar-style" />
    <meta content="Notebook" name="apple-mobile-web-app-title" />
    <link href="assets/icon.svg" id="appIcon" rel="icon" type="image/svg+xml">
    <link href="assets/icon.svg" id="appleIcon" rel="apple-touch-icon" />
    <link href="manifest.json" id="appManifest" rel="manifest" />
    <!-- Advanced Features Scripts -->
    <script src="lasso-selection.js"></script>
    <script src="shape-recognition.js"></script>
    <script src="audio-recorder.js"></script>
    <script src="scribble-eraser.js"></script>
    <script src="page-details-gesture.js"></script>
    </link>
    <link href="styles.css" rel="stylesheet" />
    <!-- Auth system: must load before script.js -->
    <script src="auth.js"></script>
    <!-- Shared library -->
    <script src="library.js"></script>
    <script defer="" src="script.js"></script>
</head>

<body class="cursor-pen">
    <button class="btn-dark-circle" id="darkModeToggle" title="Toggle Dark Mode">ğŸŒ™</button>
    <button class="btn-menu-mobile" id="mobileMenuBtn" title="Toggle Menu">â˜°</button>
    <button class="btn-exit-focus" id="_auto_1">Exit Focus</button>
    <!-- FLASHCARD OVERLAY -->
    <div class="flashcard-overlay" id="flashcardOverlay">
        <button class="fc-btn-exit" id="_auto_2">âœ•</button>
        <div class="flashcard-container" id="flashcardContainer">
            <div class="flashcard" id="_auto_3">
                <div class="flashcard-face flashcard-front">
                    <span class="flashcard-label">Question</span>
                    <div id="fcQuestion">...</div>
                </div>
                <div class="flashcard-face flashcard-back">
                    <span class="flashcard-label">Answer</span>
                    <div id="fcAnswer">...</div>
                </div>
            </div>
        </div>
        <div class="flashcard-controls">
            <button class="fc-btn" id="_auto_4">â† Prev</button>
            <span id="fcCounter">1 / 1</span>
            <button class="fc-btn" id="_auto_5">Next â†’</button>
        </div>
        <div class="no-cards-msg" id="noCardsMsg" style="display:none;">
            No flashcards found!<br />
            <span style="font-size:0.8rem; opacity:0.7;">Use "Question :: Answer" format<br />or Headers (H1-H3)
                followed
                by text.</span>
        </div>
    </div>
    <!-- CIRCUIT COMPONENTS OVERLAY -->
    <div class="circuit-components-overlay" id="circuitComponentsOverlay">
        <div class="circuit-components-panel">
            <div class="circuit-components-title">âš¡ Circuit Components Library</div>
            <div class="circuit-components-subtitle">Click to add or drag for precise placement</div>
            <div class="circuit-components-grid">
                <div class="circuit-component-card" data-component="resistor" draggable="true">
                    <svg class="circuit-component-icon" style="width: 50px; height: 50px;" viewbox="0 0 40 40">
                        <line stroke="#2c3e50" stroke-width="2" x1="5" x2="15" y1="20" y2="20"></line>
                        <rect fill="none" height="10" stroke="#2c3e50" stroke-width="2" width="10" x="15" y="15"></rect>
                        <line stroke="#2c3e50" stroke-width="2" x1="25" x2="35" y1="20" y2="20"></line>
                    </svg>
                    <div class="circuit-component-name">Resistor</div>
                </div>
                <div class="circuit-component-card" data-component="capacitor" draggable="true">
                    <svg class="circuit-component-icon" style="width: 50px; height: 50px;" viewbox="0 0 40 40">
                        <line stroke="#2c3e50" stroke-width="2" x1="5" x2="17" y1="20" y2="20"></line>
                        <line stroke="#2c3e50" stroke-width="2" x1="17" x2="17" y1="10" y2="30"></line>
                        <line stroke="#2c3e50" stroke-width="2" x1="23" x2="23" y1="10" y2="30"></line>
                        <line stroke="#2c3e50" stroke-width="2" x1="23" x2="35" y1="20" y2="20"></line>
                    </svg>
                    <div class="circuit-component-name">Capacitor</div>
                </div>
                <div class="circuit-component-card" data-component="inductor" draggable="true">
                    <svg class="circuit-component-icon" style="width: 50px; height: 50px;" viewbox="0 0 40 40">
                        <path d="M 5 20 Q 10 10, 15 20 T 25 20 T 35 20" fill="none" stroke="#2c3e50" stroke-width="2">
                        </path>
                    </svg>
                    <div class="circuit-component-name">Inductor</div>
                </div>
                <div class="circuit-component-card" data-component="battery" draggable="true">
                    <svg class="circuit-component-icon" style="width: 50px; height: 50px;" viewbox="0 0 40 40">
                        <line stroke="#2c3e50" stroke-width="2" x1="5" x2="15" y1="20" y2="20"></line>
                        <line stroke="#2c3e50" stroke-width="3" x1="15" x2="15" y1="12" y2="28"></line>
                        <line stroke="#2c3e50" stroke-width="2" x1="25" x2="25" y1="15" y2="25"></line>
                        <line stroke="#2c3e50" stroke-width="2" x1="25" x2="35" y1="20" y2="20"></line>
                    </svg>
                    <div class="circuit-component-name">Battery</div>
                </div>
                <div class="circuit-component-card" data-component="led" draggable="true">
                    <svg class="circuit-component-icon" style="width: 50px; height: 50px;" viewbox="0 0 40 40">
                        <line stroke="#2c3e50" stroke-width="2" x1="5" x2="15" y1="20" y2="20"></line>
                        <polygon fill="#e74c3c" points="15,10 15,30 25,20"></polygon>
                        <line stroke="#2c3e50" stroke-width="2" x1="25" x2="25" y1="10" y2="30"></line>
                        <line stroke="#2c3e50" stroke-width="2" x1="25" x2="35" y1="20" y2="20"></line>
                    </svg>
                    <div class="circuit-component-name">LED</div>
                </div>
                <div class="circuit-component-card" data-component="switch" draggable="true">
                    <svg class="circuit-component-icon" style="width: 50px; height: 50px;" viewbox="0 0 40 40">
                        <line stroke="#2c3e50" stroke-width="2" x1="5" x2="15" y1="20" y2="20"></line>
                        <line stroke="#2c3e50" stroke-width="2" x1="15" x2="30" y1="20" y2="10"></line>
                        <circle cx="15" cy="20" fill="#2c3e50" r="2"></circle>
                        <circle cx="30" cy="20" fill="#2c3e50" r="2"></circle>
                        <line stroke="#2c3e50" stroke-width="2" x1="30" x2="35" y1="20" y2="20"></line>
                    </svg>
                    <div class="circuit-component-name">Switch</div>
                </div>
                <div class="circuit-component-card" data-component="ground" draggable="true">
                    <svg class="circuit-component-icon" style="width: 50px; height: 50px;" viewbox="0 0 40 40">
                        <line stroke="#2c3e50" stroke-width="2" x1="20" x2="20" y1="5" y2="20"></line>
                        <line stroke="#2c3e50" stroke-width="2" x1="10" x2="30" y1="20" y2="20"></line>
                        <line stroke="#2c3e50" stroke-width="2" x1="13" x2="27" y1="25" y2="25"></line>
                        <line stroke="#2c3e50" stroke-width="2" x1="16" x2="24" y1="30" y2="30"></line>
                    </svg>
                    <div class="circuit-component-name">Ground</div>
                </div>
                <div class="circuit-component-card" data-component="bulb" draggable="true">
                    <svg class="circuit-component-icon" style="width: 50px; height: 50px;" viewbox="0 0 40 40">
                        <line stroke="#2c3e50" stroke-width="2" x1="5" x2="10" y1="20" y2="20"></line>
                        <circle cx="20" cy="20" fill="none" r="10" stroke="#2c3e50" stroke-width="2"></circle>
                        <path d="M 15 25 L 15 30 M 25 25 L 25 30 M 13 30 L 27 30" fill="none" stroke="#2c3e50"
                            stroke-width="2"></path>
                        <line stroke="#2c3e50" stroke-width="2" x1="30" x2="35" y1="20" y2="20"></line>
                    </svg>
                    <div class="circuit-component-name">Light Bulb</div>
                </div>
                <div class="circuit-component-card" data-component="voltmeter" draggable="true">
                    <svg class="circuit-component-icon" style="width: 50px; height: 50px;" viewbox="0 0 40 40">
                        <circle cx="20" cy="20" fill="none" r="12" stroke="#2c3e50" stroke-width="2"></circle>
                        <text fill="#2c3e50" font-size="12" font-weight="bold" text-anchor="middle" x="20"
                            y="25">V</text>
                        <line stroke="#2c3e50" stroke-width="2" x1="5" x2="8" y1="20" y2="20"></line>
                        <line stroke="#2c3e50" stroke-width="2" x1="32" x2="35" y1="20" y2="20"></line>
                    </svg>
                    <div class="circuit-component-name">Voltmeter</div>
                </div>
                <div class="circuit-component-card" data-component="ammeter" draggable="true">
                    <svg class="circuit-component-icon" style="width: 50px; height: 50px;" viewbox="0 0 40 40">
                        <circle cx="20" cy="20" fill="none" r="12" stroke="#2c3e50" stroke-width="2"></circle>
                        <text fill="#2c3e50" font-size="12" font-weight="bold" text-anchor="middle" x="20"
                            y="25">A</text>
                        <line stroke="#2c3e50" stroke-width="2" x1="5" x2="8" y1="20" y2="20"></line>
                        <line stroke="#2c3e50" stroke-width="2" x1="32" x2="35" y1="20" y2="20"></line>
                    </svg>
                    <div class="circuit-component-name">Ammeter</div>
                </div>
            </div>
            <button class="circuit-close-btn" id="_auto_6">Close</button>
        </div>
    </div>
    <!-- ENGINEERING RULER -->
    <div id="engRuler">
        <div class="rotate-handle" id="rulerRotate">âŸ³</div>
    </div>
    <!-- MATH KEYBOARD PANEL -->
    <div class="math-keyboard-panel" id="mathKeyboard">
        <div class="math-input-bar">
            <span style="font-size:0.8rem; font-weight:bold;">âˆ‘</span>
            <input class="math-buffer" id="mathBuffer" placeholder="Type LaTeX..." type="text" />
            <div class="math-preview" id="mathPreview"></div>
            <button class="btn btn-secondary" id="_auto_7"
                style="width:auto; padding:5px 15px; margin:0; background:var(--save-color); color:white;">Insert</button>
            <button class="btn btn-secondary" id="_auto_8" style="width:auto; padding:5px 10px; margin:0;">â–¼</button>
        </div>
        <div class="math-tabs">
            <button class="math-tab-btn active" id="_auto_9">Basic</button>
            <button class="math-tab-btn" id="_auto_10">Trig</button>
            <button class="math-tab-btn" id="_auto_11">Calculus</button>
            <button class="math-tab-btn" id="_auto_12">Geometry</button>
            <button class="math-tab-btn" id="_auto_13">Structure</button>
        </div>
        <div class="math-keys-grid" id="mathKeys"></div>
    </div>
    <!-- TRACE TABLE MODAL -->
    <div class="floating-pane" id="traceModal" style="display:none; width: 300px; z-index: 1002;">
        <h3 style="margin-bottom: 15px;">New Trace Table</h3>
        <p style="font-size:0.9rem; color:#666; margin-bottom:10px;">Number of Variables:</p>
        <input class="meta-value" id="traceVarCount" max="10" min="1" style="margin-bottom:15px;" type="number"
            value="3" />
        <div style="display:flex; gap:10px;">
            <button class="tool-btn" id="_auto_14"
                style="background: var(--save-color); color: white; justify-content: center; flex:1;">Insert</button>
            <button class="tool-btn" id="_auto_15"
                style="background: #eee; justify-content: center; flex:1;">Cancel</button>
        </div>
    </div>
    <!-- CONSTANTS MODAL -->
    <div class="floating-pane" id="constantModal" style="display:none; width: 300px; z-index: 1002;">
        <h3 style="margin-bottom: 15px;">Insert Constant</h3>
        <div style="margin-bottom:10px;">
            <label style="font-size:0.8rem; color:#666; display:block; margin-bottom:5px;">Symbol (e.g. g, pi,
                c)</label>
            <input class="meta-value" id="constInput" placeholder="Type symbol..." type="text" />
        </div>
        <div style="margin-bottom:15px;">
            <label style="font-size:0.8rem; color:#666; display:block; margin-bottom:5px;">Value (Editable)</label>
            <input class="meta-value" id="constValue" placeholder="Value will appear here..." type="text" />
        </div>
        <div style="display:flex; gap:10px;">
            <button class="tool-btn" id="_auto_16"
                style="background: var(--save-color); color: white; justify-content: center; flex:1;">Insert</button>
            <button class="tool-btn" id="_auto_17"
                style="background: #eee; justify-content: center; flex:1;">Cancel</button>
        </div>
    </div>
    <!-- ANATOMY ATLAS MODAL -->
    <div class="floating-pane" id="anatomyModal" style="display:none; width: 500px; max-width: 90vw; z-index: 2006;">
        <h3 style="margin-bottom: 10px;">Anatomy Atlas</h3>
        <div class="atlas-controls">
            <button class="tool-btn" id="_auto_18" style="width:auto;">ğŸ‘¤ Body</button>
            <button class="tool-btn" id="_auto_19" style="width:auto;">ğŸ¦· Tooth</button>
            <button class="tool-btn" id="_auto_20" style="width:auto;">ğŸ§  Brain</button>
        </div>
        <div class="anatomy-container" id="anatomyContainer">
            <!-- SVG injected here -->
        </div>
        <p style="font-size: 0.8rem; color: #666; margin-top: 10px; text-align: center;">Click a region to insert a
            study header.</p>
        <button class="tool-btn" id="_auto_21" style="margin-top: 10px; background: #eee;">Close</button>
    </div>
    <!-- PDF MODE SELECTION MODAL -->
    <div class="floating-pane" id="pdfModeModal" style="display:none; width: 320px; z-index: 2005; text-align: center;">
        <h3 style="margin-bottom: 10px;">ğŸ“š Import PDF</h3>
        <p style="font-size:0.9rem; color:#666; margin-bottom:20px;">How would you like to use this file?</p>
        <button class="tool-btn" id="_auto_22"
            style="background: var(--template-color); color: white; justify-content: center; width:100%; margin-bottom:5px; font-weight:bold;">
            ğŸ– Annotate on Paper
        </button>
        <p style="font-size:0.75rem; color:#888; margin-bottom: 15px;">Render slides as background to draw over them.
        </p>
        <button class="tool-btn" id="_auto_23"
            style="background: var(--sidebar-bg); color: white; justify-content: center; width:100%; margin-bottom:5px; font-weight:bold;">
            ğŸ“– Split Screen Reader
        </button>
        <p style="font-size:0.75rem; color:#888; margin-bottom: 15px;">Open PDF on the side while you take notes.</p>
        <button class="tool-btn" id="_auto_24"
            style="background: #eee; justify-content: center; width:100%;">Cancel</button>
    </div>
    <div class="text-bubble" id="textBubble">
        <button class="bubble-btn" id="_auto_25">B</button>
        <button class="bubble-btn" id="_auto_26">I</button>
        <button class="bubble-btn" id="_auto_27">H1</button>
        <button class="bubble-btn" id="_auto_28">H2</button>
        <button class="bubble-btn" id="_auto_29">â€¢ List</button>
        <button class="bubble-btn" id="_auto_30" style="background: var(--accent-color); color: white;"
            title="Save to My References">â­</button>
    </div>
    <aside class="sidebar" id="mainSidebar">

        <!-- â”€â”€â”€ USER PROFILE BAR â”€â”€â”€ -->
        <div id="userProfileBar" class="user-profile-bar"></div>

        <style>
            /* User profile bar in sidebar */
            .user-profile-bar {
                display: flex;
                align-items: center;
                gap: 10px;
                padding: 10px 14px;
                background: rgba(0,0,0,0.15);
                border-bottom: 1px solid rgba(255,255,255,0.07);
                min-height: 56px;
            }
            .up-avatar { flex-shrink: 0; line-height: 0; }
            .up-info {
                flex: 1;
                min-width: 0;
                overflow: hidden;
            }
            .up-name {
                font-family: 'Caveat', cursive;
                font-size: 1rem;
                font-weight: 700;
                color: #fff;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
                display: flex;
                align-items: center;
                gap: 5px;
            }
            .up-guest-badge {
                font-size: 0.65rem;
                background: rgba(255,255,255,0.15);
                color: rgba(255,255,255,0.7);
                padding: 1px 5px;
                border-radius: 3px;
                font-family: sans-serif;
                font-weight: normal;
                vertical-align: middle;
            }
            .up-email {
                font-size: 0.72rem;
                color: rgba(255,255,255,0.5);
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
                margin-top: 1px;
            }
            .up-actions {
                display: flex;
                gap: 4px;
                flex-shrink: 0;
            }
            .up-btn {
                background: rgba(255,255,255,0.08);
                border: 1px solid rgba(255,255,255,0.12);
                border-radius: 5px;
                width: 28px;
                height: 28px;
                display: flex;
                align-items: center;
                justify-content: center;
                cursor: pointer;
                font-size: 0.85rem;
                transition: background 0.15s;
                padding: 0;
            }
            .up-btn:hover { background: rgba(255,255,255,0.18); }
            .up-logout:hover { background: rgba(231,76,60,0.4); }

            /* Share-to-library button on sidebar note cards */
            .chapter-share-btn {
                background: transparent;
                border: none;
                font-size: 1rem;
                cursor: pointer;
                padding: 4px 5px;
                border-radius: 5px;
                opacity: 0;
                transition: all 0.2s ease;
                flex-shrink: 0;
                line-height: 1;
            }
            .chapter-item:hover .chapter-share-btn { opacity: 1; }
            .chapter-share-btn:hover { background: rgba(41,128,185,0.15); transform: scale(1.1); }
            .chapter-share-btn.published { opacity: 0.7; filter: saturate(0.5); }
            .chapter-share-btn.published:hover { filter: saturate(1); background: rgba(192,57,43,0.15); }
        </style>

        <div class="sidebar-header">
            <div class="app-title">Academic Notebook</div>
            <select class="category-filter" id="categoryFilter">
                <option value="all">ğŸ“ All Notes</option>
                <optgroup label="General">
                    <option value="General">ğŸ“ General</option>
                    <option value="Projects">ğŸš€ Projects</option>
                </optgroup>
                <optgroup label="Computer Science">
                    <option value="Algorithms">ğŸ“ Algorithms</option>
                    <option value="Systems">âš™ï¸ Systems</option>
                </optgroup>
                <optgroup label="Medical">
                    <option value="Anatomy">ğŸ§  Anatomy</option>
                    <option value="Pathology">ğŸ¦  Pathology</option>
                    <option value="Pharmacology">ğŸ’Š Pharmacology</option>
                    <option value="Clinical">ğŸ¥ Clinical</option>
                </optgroup>
                <optgroup label="Dentistry">
                    <option value="Dental Anatomy">ğŸ¦· Dental Anatomy</option>
                    <option value="Procedures">ğŸ› ï¸ Procedures</option>
                    <option value="Dental Cases">ğŸ§¾ Cases</option>
                </optgroup>
                <optgroup label="Engineering">
                    <option value="Electrical">âš¡ Electrical (EE)</option>
                    <option value="Mechanical">âš™ï¸ Mechanical (ME)</option>
                    <option value="Civil">ğŸ— Civil (CE)</option>
                    <option value="Electronics">ğŸ“¡ Electronics (ECE)</option>
                    <option value="Mechatronics">ğŸ¦¾ Mechatronics</option>
                    <option value="Industrial">ğŸ­ Industrial</option>
                </optgroup>
            </select>
            <div class="search-container">
                <input class="search-input" id="sidebarSearch" placeholder="Search or #tag..." type="text" />
            </div>
        </div>
        <div class="sidebar-scrollable">
            <div class="sidebar-section pages-section" id="pagesSectionWrapper">
                <div class="section-header" id="_auto_31">
                    <span>ğŸ“š Notes</span>
                    <span class="arrow" id="pagesArrow">â–¼</span>
                </div>
                <div class="section-content" id="pagesContent">
                    <ul class="chapter-list" id="chapterList"></ul>
                </div>
            </div>
            <!-- NEW: TAGS SECTION -->
            <div class="sidebar-section tags-section" id="tagsSectionWrapper">
                <div class="section-header" id="_auto_32">
                    <span>ğŸ·ï¸ Tags</span>
                    <span class="arrow" id="tagsArrow">â–¼</span>
                </div>
                <div class="section-content" id="tagsContent">
                    <div class="tag-cloud" id="tagCloud"></div>
                </div>
            </div>
            <!-- POMODORO TIMER SECTION -->
            <div class="sidebar-section" id="pomodoroSectionWrapper">
                <div class="section-header" id="_auto_33">
                    <span>ğŸ… Study Timer</span>
                    <span class="arrow" id="pomodoroArrow">â–¼</span>
                </div>
                <div class="section-content" id="pomodoroContent">
                    <div class="pomodoro-container">
                        <div class="pomodoro-mode" id="pomodoroMode">Focus Time</div>
                        <div class="pomodoro-display" id="pomodoroDisplay">25:00</div>
                        <div class="pomodoro-progress">
                            <div class="pomodoro-progress-bar" id="pomodoroProgressBar"></div>
                        </div>
                        <div class="pomodoro-controls">
                            <button class="pomodoro-btn" id="pomodoroStartBtn" title="Start focus session">â–¶ï¸
                                Start</button>
                            <button class="pomodoro-btn" id="pomodoroPauseBtn" style="display:none;"
                                title="Pause timer">â¸ï¸ Pause</button>
                            <button class="pomodoro-btn" id="_auto_34" title="Reset to 25 minutes">ğŸ”„
                                Reset</button>
                        </div>
                        <div class="pomodoro-dnd-container">
                            <label class="pomodoro-dnd-label" title="Block distractions during focus time">
                                <input id="dndToggle" type="checkbox" />
                                <span>ğŸ”‡ Do Not Disturb</span>
                            </label>
                        </div>
                        <div class="pomodoro-stats">
                            <div class="pomodoro-stat-item">
                                <span>Sessions</span>
                                <span class="pomodoro-stat-value" id="pomodoroSessionCount">0</span>
                            </div>
                            <div class="pomodoro-stat-item">
                                <span>Today</span>
                                <span class="pomodoro-stat-value" id="pomodoroTodayCount">0</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- KNOWLEDGE BASE SECTION -->
            <div class="sidebar-section" id="knowledgeBaseSectionWrapper">
                <div class="section-header" id="_auto_35">
                    <span>ğŸ“š Knowledge Base</span>
                    <span class="arrow" id="knowledgeBaseArrow">â–¼</span>
                </div>
                <div class="section-content" id="knowledgeBaseContent">
                    <div class="knowledge-base-container" id="knowledgeBaseContainer">
                        <div style="font-size: 0.75rem; opacity: 0.7; text-align: center; padding: 10px;">
                            Select a page to view relevant references
                        </div>
                    </div>
                </div>
            </div>
            <!-- MY REFERENCES SECTION -->
            <div class="sidebar-section" id="myReferencesSectionWrapper">
                <div class="section-header" id="_auto_36">
                    <span>â­ My References</span>
                    <span class="arrow" id="myReferencesArrow">â–¼</span>
                </div>
                <div class="section-content" id="myReferencesContent">
                    <div class="my-refs-container" id="myReferencesContainer"></div>
                </div>
            </div>
            <div class="sidebar-section tools-section">
                <div class="section-header" id="_auto_37">
                    <span>ğŸ› ï¸ Tools</span>
                    <span class="arrow" id="toolsArrow">â–¼</span>
                </div>
                <div class="section-content" id="toolsContent">
                    <div class="sidebar-actions">
                        <button class="btn" id="installAppBtn">ğŸ“² Install App</button>
                        <a class="btn" href="library.html" target="_blank" style="text-align:center; text-decoration:none; background:rgba(255,255,255,0.15); color:#ecf0f1;">ğŸ“š Note Library</a>
                        <button class="btn btn-add" id="_auto_38">+ New Page</button>
                        <button class="btn btn-secondary" id="_auto_39">ğŸ‘ï¸ Focus Mode</button>
                        <button class="btn btn-secondary" id="_auto_40">ğŸ—‚ Flashcards</button>
                        <button class="btn btn-secondary" id="paperStyleBtn">ğŸ“„ Page:
                            Grid</button>
                        <small
                            style="opacity: 0.7; font-size: 0.75em; display: block; margin-top: -8px; margin-left: 4px; color: var(--sidebar-text);">Size
                            &amp; Texture</small>
                        <button class="btn btn-secondary" id="_auto_41" title="Share this note">ğŸ“¤
                            Share</button>
                        <button class="btn btn-save-sidebar" id="_auto_42">ğŸ–¨ï¸ Save as PDF</button>
                        <button class="btn btn-secondary" id="readModeBtn">ğŸ”“ Lock /
                            Read</button>
                        <button class="btn btn-secondary" id="_auto_43">â“˜ Page Details</button>
                        <!-- UPDATED PDF TOOLS: CONSOLIDATED -->
                        <button class="btn btn-secondary"
                            style="position: relative; border: 1px solid var(--template-color);">
                            ğŸ“š Load Lecture
                            <input accept="application/pdf" id="_auto_44"
                                style="position: absolute; top:0; left:0; width:100%; height:100%; opacity:0; cursor:pointer;"
                                type="file" />
                        </button>
                        <button class="btn btn-secondary" style="position: relative;">
                            ğŸ“„ Import Background
                            <input accept="image/*" id="_auto_45"
                                style="position: absolute; top:0; left:0; width:100%; height:100%; opacity:0; cursor:pointer;"
                                type="file" />
                        </button>
                        <button class="btn btn-sketch" id="sketchToggle">ğŸ¨ Sketch
                            Mode</button>
                        <button class="btn" id="_auto_46" style="background: #3498db; color: white;">ğŸ“‹
                            Templates</button>
                        <div style="margin-top: 15px; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 15px;">
                            <button class="btn btn-secondary" id="_auto_47" style="font-size: 0.8rem;">â¬‡ Export
                                Backup</button>
                            <button class="btn btn-secondary" style="font-size: 0.8rem; position: relative;">
                                â¬† Import Backup
                                <input accept=".json" id="importFile"
                                    style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; cursor: pointer;"
                                    type="file" />
                            </button>
                            <button class="btn btn-danger" id="_auto_48">âš  Wipe All Data</button>
                        </div>
                    </div>
                </div>
            </div>
        </div><!-- End of sidebar-scrollable -->
        <div class="storage-footer">
            <div style="display:flex; justify-content:space-between;">
                <span>Storage Used</span>
                <span id="storageText">Checking...</span>
            </div>
            <div class="storage-bar-bg">
                <div class="storage-bar-fill" id="storageBar"></div>
            </div>
        </div>
    </aside>
    <div class="tool-tray-container" id="trayContainer">
        <div class="tool-tray">
            <!-- Global Tools -->
            <button class="tool-btn" id="voiceBtn"><span>ğŸ¤</span> Dictate</button>
            <button class="tool-btn" id="handBtn"><span>âœ‹</span> Pan</button>
            <button class="tool-btn" id="eraserBtn"><span>ğŸ§¼</span> Eraser</button>
            <div class="tool-btn" style="position: relative;">
                <span>ğŸŒˆ</span> Color
                <input class="color-picker-input" id="customColorPicker" type="color" />
            </div>
            <hr style="opacity: 0.2;" />
            <!-- PHASE 1 ADVANCED FEATURES -->
            <button class="tool-btn" id="lassoBtn"><span>â­•</span> Lasso Select</button>
            <button class="tool-btn" id="shapeRecBtn"><span>ğŸŸ¦</span> Shape
                Fix</button>
            <small style="opacity: 0.6; font-size: 0.7rem; margin: -5px 0 5px 5px; display: block;">Zoom: Fixed btns
                bottom-right</small>
            <hr style="opacity: 0.2;" />
            <!-- PHASE 2 ADVANCED FEATURES -->
            <button class="tool-btn" id="audioRecordBtn"><span>ğŸ¤</span> Record &amp;
                Transcribe</button>
            <hr style="opacity: 0.2;" />
            <!-- Standard Block Tools -->
            <button class="tool-btn" id="_auto_49"><span>ğŸ·ï¸</span> Title</button>
            <button class="tool-btn" id="_auto_50"><span>ğŸ“Œ</span> Note</button>
            <button class="tool-btn" id="_auto_51"><span>âœ…</span> To-Do</button>
            <!-- 1. CS TOOLBAR -->
            <div id="tools-cs" style="display:none; flex-direction:column; gap:8px;">
                <hr style="opacity: 0.2;" />
                <button class="tool-btn" id="_auto_52"><span>&lt;&gt;</span> Code Block</button>
                <!-- Code button removed here as requested -->
                <button class="tool-btn" id="_auto_53"><span>ğŸ”¢</span> Algorithm Step</button>
                <button class="tool-btn" id="_auto_54"><span>O(n)</span> Complexity</button>
                <button class="tool-btn" id="_auto_55"><span>ğŸ“‰</span> Trace Table</button>
            </div>
            <!-- 2. MEDICAL TOOLBAR -->
            <div id="tools-med" style="display:none; flex-direction:column; gap:8px;">
                <hr style="opacity: 0.2;" />
                <button class="tool-btn" id="_auto_56"><span>ğŸ§˜</span> Atlas</button>
                <button class="tool-btn" id="_auto_57"><span>ğŸ“</span> Pin</button>
                <button class="tool-btn" id="_auto_58"><span>ğŸŸ¡</span> Sx</button>
                <button class="tool-btn" id="_auto_59"><span>ğŸ”´</span> Rx</button>
                <button class="tool-btn" id="_auto_60"><span>â³</span> Timeline</button>
                <button class="tool-btn" id="_auto_61"><span>âš–ï¸</span> Compare</button>
            </div>
            <!-- 3. ENGINEERING TOOLBAR -->
            <div id="tools-eng" style="display:none; flex-direction:column; gap:8px;">
                <hr style="opacity: 0.2;" />
                <button class="tool-btn" id="mathModeBtn"><span>âˆ‘</span> Math Mode</button>
                <button class="tool-btn" id="_auto_62"><span>ğŸ“</span> Ruler</button>
                <button class="tool-btn" id="_auto_63"><span>âˆ‘</span> Eq Block</button>
                <button class="tool-btn" id="_auto_64"><span>ğŸ¤”</span> Assume</button>
                <button class="tool-btn" id="_auto_65"><span>Ï€</span> Constants</button>
            </div>
            <!-- Circuit Components Tool (only for Circuit Analysis) -->
            <div id="tools-circuit" style="display:none; flex-direction:column; gap:8px;">
                <hr style="opacity: 0.2;" />
                <button class="tool-btn" id="circuitComponentsBtn">
                    <span>âš¡</span> Components
                </button>
            </div>
            <button class="tool-btn" id="stickerBtn"><span>ğŸ‘ï¸</span> Sticker</button>
            <button class="tool-btn" id="_auto_66"><span>ğŸ“¸</span> Photo</button>
            <hr style="opacity: 0.2;" />
            <button class="tool-btn" id="_auto_67" style="color: #e74c3c"><span>ğŸ—‘ï¸</span> Clear
                Sketch</button>
        </div>
        <button class="tool-tray-toggle" id="trayToggle">â—€</button>
    </div>
    <!-- MAIN CONTAINER FOR SPLIT LAYOUT -->
    <div class="main-container" id="mainContainer">
        <main class="workspace" id="workspace">
            <div class="paper" id="paper">
                <!-- PDF BACKGROUND LAYER -->
                <div id="pdfBackground"></div>
                <!-- MATH LAYER CONTAINER -->
                <div id="mathLayer">
                </div>
                <canvas id="sketchCanvas"></canvas>
                <div class="status-bar">
                    <span class="save-status" id="saveStatus">All changes saved</span>
                    <span class="word-count" id="wordCount">0 Words</span>
                </div>
                <div class="show-tools-btn" id="_auto_68">âœ</div>
                <div class="writing-tools" id="topTools">
                    <div class="tool-opt active" data-tool="pen" id="_auto_69">ğŸ–Šï¸</div>
                    <div class="tool-opt" data-tool="pencil" id="_auto_70">âœï¸</div>
                    <div class="tool-opt highlighter" data-tool="highlighter" id="_auto_71">ğŸ–Œï¸</div>
                    <div class="tool-opt" data-tool="marker" id="_auto_72">ğŸ–ï¸</div>
                    <div class="tool-opt" data-tool="elegant" id="_auto_73">âœ’ï¸</div>
                    <div class="tool-opt" data-tool="brush" id="_auto_74">ğŸ¨</div>
                    <div class="tool-opt" data-tool="chalk" id="_auto_75">ğŸ“</div>
                    <div class="tool-divider" style="margin: 0 10px;"></div>
                    <div class="tool-opt" id="_auto_76" style="font-weight:bold;">_</div>
                    <div class="tool-divider sketch-only"></div>
                    <div class="tool-opt sketch-only" id="_auto_77" title="Undo">â†©ï¸</div>
                    <div class="tool-opt sketch-only" id="_auto_78" title="Redo">â†ªï¸</div>
                </div>
                <input accept="image/*" id="imageInput" style="display: none;" type="file" />
                <input class="paper-title" id="pageTitle" placeholder="Page titleâ€¦" type="text" />
                <!-- NEW: Sequential Stream Container -->
                <div id="sequentialStream">
                    <!-- Content Area injected here by JS -->
                </div>
            </div>
            <!-- NEW CONTROLS AT END OF STREAM (OUTSIDE PAPER) -->
            <div id="streamControls">
                <button class="btn-stream-add" id="_auto_79">
                    â• Add Page to Stream
                </button>
            </div>
        </main>
        <!-- LECTURE PANE (RIGHT SPLIT) -->
        <div class="lecture-pane" id="lecturePane">
            <div class="lecture-header">
                <span>ğŸ“š Lecture Reader</span>
                <button class="bubble-btn" id="_auto_80">âœ– Close</button>
            </div>
            <iframe class="lecture-frame" id="lectureFrame"></iframe>
        </div>
    </div>
    <!-- METADATA MODAL -->
    <div class="floating-pane" id="metadataModal" style="display:none; width: 300px;">
        <h3 style="margin-bottom: 15px;">Page Details</h3>
        <div class="meta-group">
            <label class="meta-label">Tags</label>
            <div class="tag-input-container" style="display:flex; gap:5px; margin-bottom:5px;">
                <input class="meta-value" id="metaTagInput" placeholder="Add tag..." type="text" />
                <button class="btn btn-secondary" id="_auto_81"
                    style="width:auto; padding:5px 10px; margin:0;">+</button>
            </div>
            <div class="meta-tags" id="metaTagsList"></div>
        </div>
        <div class="meta-group">
            <label class="meta-label">Discipline</label>
            <select class="meta-value" disabled="" id="metaDiscipline">
                <option value="cs">Computer Science</option>
                <option value="medical">Medical</option>
                <option value="engineering">Engineering</option>
                <option value="general">General</option>
            </select>
        </div>
        <div class="meta-group">
            <label class="meta-label">Page Type</label>
            <select class="meta-value" id="metaType">
                <option value="note">General Note</option>
                <option value="concept">Concept</option>
                <option value="algorithm">Algorithm</option>
                <option value="system">System Design</option>
                <option value="project">Project</option>
                <option value="whiteboard">Whiteboard</option>
                <optgroup label="Medical">
                    <option value="anatomy">Anatomy</option>
                    <option value="disease">Disease Profile</option>
                    <option value="drug">Drug Monograph</option>
                    <option value="pathway">Pathway</option>
                    <option value="clinical_case">Clinical Case</option>
                    <option value="lab">Lab Interpretation</option>
                </optgroup>
                <optgroup label="Dentistry">
                    <option value="dental_anatomy">Dental Anatomy</option>
                    <option value="oral_pathology">Oral Pathology</option>
                    <option value="dental_procedure">Procedure</option>
                    <option value="dental_case">Dental Case</option>
                    <option value="prostho_plan">Prostho Plan</option>
                    <option value="endo_case">Endo Case</option>
                    <option value="perio_case">Perio Case</option>
                    <option value="oral_radiology">Oral Radiology</option>
                </optgroup>
                <!-- ENGINEERING -->
                <optgroup label="Engineering">
                    <option value="problem_solution">Problem Solution</option>
                    <option value="circuit_analysis">Circuit Analysis</option>
                    <option value="mechanical_system">Mechanical System</option>
                    <option value="structural_analysis">Structural Analysis</option>
                    <option value="control_system">Control System</option>
                    <option value="process_flow">Process Flow</option>
                    <option value="design_calculation">Design Calc</option>
                    <option value="lab_experiment">Lab Experiment</option>
                </optgroup>
            </select>
        </div>
        <div class="meta-group">
            <label class="meta-label">System / Course</label>
            <input class="meta-value" id="metaSystem" placeholder="e.g. Cardio, Neuro..." type="text" />
        </div>
        <!-- DENTISTRY SPECIFIC METADATA -->
        <div id="dentalMetaGroup"
            style="display:none; border-top: 1px dashed #ccc; padding-top: 10px; margin-top: 10px;">
            <div class="meta-group">
                <label class="meta-label">Tooth # (FDI/Universal)</label>
                <input class="meta-value" id="metaTooth" placeholder="e.g. 11, 46, #3..." type="text" />
            </div>
            <div class="meta-group">
                <label class="meta-label">Quadrant</label>
                <select class="meta-value" id="metaQuadrant">
                    <option value="">None</option>
                    <option value="UR">UR (1)</option>
                    <option value="UL">UL (2)</option>
                    <option value="LL">LL (3)</option>
                    <option value="LR">LR (4)</option>
                </select>
            </div>
            <div class="meta-group">
                <label class="meta-label">Specialty</label>
                <select class="meta-value" id="metaSpecialty">
                    <option value="">General</option>
                    <option value="Endo">Endodontics</option>
                    <option value="Perio">Periodontics</option>
                    <option value="Prostho">Prosthodontics</option>
                    <option value="Ortho">Orthodontics</option>
                    <option value="Surgery">Oral Surgery</option>
                    <option value="Pedo">Pedodontics</option>
                </select>
            </div>
        </div>
        <!-- ENGINEERING SPECIFIC METADATA -->
        <div id="engineeringMetaGroup"
            style="display:none; border-top: 1px dashed #ccc; padding-top: 10px; margin-top: 10px;">
            <div class="meta-group">
                <label class="meta-label">Engineering Branch</label>
                <select class="meta-value" id="metaEngBranch">
                    <option value="Electrical">Electrical (EE)</option>
                    <option value="Mechanical">Mechanical (ME)</option>
                    <option value="Civil">Civil (CE)</option>
                    <option value="Electronics">Electronics (ECE)</option>
                    <option value="Mechatronics">Mechatronics</option>
                    <option value="Industrial">Industrial</option>
                    <option value="General">General</option>
                </select>
            </div>
        </div>
        <div class="meta-group">
            <label class="meta-label">Difficulty</label>
            <select class="meta-value" id="metaDifficulty">
                <option value="easy">Easy</option>
                <option value="medium">Medium</option>
                <option value="hard">Hard</option>
                <option value="exam">Exam Critical</option>
            </select>
        </div>
        <div class="meta-group">
            <label class="meta-label">Created At</label>
            <div id="metaCreated" style="font-size:0.8rem; color:#666;"></div>
        </div>
        <button class="tool-btn" id="_auto_82" style="margin-top: 10px; background: #eee;">Close</button>
    </div>
    <!-- UPDATED TEMPLATE POPUP -->
    <div class="floating-pane" id="templatePopup">
        <h3 style="margin-bottom: 10px;">Select Template</h3>
        <!-- Main Menu View -->
        <div id="tmpl-main-view">
            <button class="tool-btn" id="_auto_83"
                style="justify-content:space-between; background: var(--cs-accent); color: white; border: none;">
                <span>ğŸ’» Computer Science</span>
                <span>â–¶</span>
            </button>
            <button class="tool-btn" id="_auto_84"
                style="justify-content:space-between; background: var(--med-accent); color: white; border: none;">
                <span>âš•ï¸ Medical</span>
                <span>â–¶</span>
            </button>
            <button class="tool-btn" id="_auto_85"
                style="justify-content:space-between; background: var(--dent-accent); color: white; border: none;">
                <span>ğŸ¦· Dentistry</span>
                <span>â–¶</span>
            </button>
            <button class="tool-btn" id="_auto_86"
                style="justify-content:space-between; background: var(--eng-accent); color: white; border: none;">
                <span>âš™ï¸ Engineering</span>
                <span>â–¶</span>
            </button>
            <button class="tool-btn" id="_auto_87"
                style="justify-content:space-between; background: var(--accent-color); color: white; border: none; font-weight: bold;">
                <span>âš¡ Advanced Templates</span>
                <span>â–¶</span>
            </button>
            <hr style="width:100%; opacity:0.1; margin: 8px 0;" />
            <button class="tool-btn" id="_auto_88">ğŸ“„ Default Page</button>
            <button class="tool-btn" id="_auto_89">â™¾ï¸ Infinite Whiteboard</button>
            <button class="tool-btn" id="_auto_90">ğŸ“… Meeting Notes</button>
            <button class="tool-btn" id="_auto_91">ğŸ“– Daily Journal</button>
            <button class="tool-btn" id="_auto_92">âš–ï¸ Eisenhower Matrix</button>
        </div>
        <!-- Advanced Templates View -->
        <div id="tmpl-advanced-view" style="display:none;">
            <button class="tool-btn" id="_auto_93"
                style="background:#eee; margin-bottom:5px; justify-content: center;">â—€ Back to Main</button>
            <div
                style="background: rgba(231,76,60,0.1); padding: 12px; border-radius: 6px; margin-bottom: 15px; font-size: 0.85rem;">
                <strong>âš ï¸ Advanced Templates</strong> enforce structure for deeper learning. Great for exam prep and
                mastery!
            </div>
            <button class="tool-btn" id="_auto_94" style="border-left: 4px solid var(--cs-accent);">
                <div style="text-align: left;">
                    <div style="font-weight: bold;">ğŸ“ Cornell Notes</div>
                    <div style="font-size: 0.75rem; opacity: 0.7;">Lectures &amp; Active Recall</div>
                </div>
            </button>
            <button class="tool-btn" id="_auto_95" style="border-left: 4px solid var(--template-color);">
                <div style="text-align: left;">
                    <div style="font-weight: bold;">ğŸ”— Zettelkasten</div>
                    <div style="font-size: 0.75rem; opacity: 0.7;">Atomic Notes &amp; Linking</div>
                </div>
            </button>
            <button class="tool-btn" id="_auto_96" style="border-left: 4px solid #95a5a6;">
                <div style="text-align: left;">
                    <div style="font-weight: bold;">ğŸ“‹ Outline Method</div>
                    <div style="font-size: 0.75rem; opacity: 0.7;">Hierarchical Topics</div>
                </div>
            </button>
            <button class="tool-btn" id="_auto_97" style="border-left: 4px solid #9b59b6;">
                <div style="text-align: left;">
                    <div style="font-weight: bold;">ğŸ§  Mind Mapping</div>
                    <div style="font-size: 0.75rem; opacity: 0.7;">Visual Connections</div>
                </div>
            </button>
            <button class="tool-btn" id="_auto_98" style="border-left: 4px solid #16a085;">
                <div style="text-align: left;">
                    <div style="font-weight: bold;">ğŸ“– SQ3R Reading</div>
                    <div style="font-size: 0.75rem; opacity: 0.7;">Active Reading Method</div>
                </div>
            </button>
            <button class="tool-btn" id="_auto_99" style="border-left: 4px solid #e67e22;">
                <div style="text-align: left;">
                    <div style="font-weight: bold;">ğŸ“ Feynman Technique</div>
                    <div style="font-size: 0.75rem; opacity: 0.7;">Deep Understanding</div>
                </div>
            </button>
        </div>
        <!-- CS Sub-Menu View -->
        <div id="tmpl-cs-view" style="display:none;">
            <button class="tool-btn" id="_auto_100"
                style="background:#eee; margin-bottom:5px; justify-content: center;">â—€ Back to Main</button>
            <button class="tool-btn" id="_auto_101">ğŸ“ Algorithm Sheet</button>
            <button class="tool-btn" id="_auto_102">ğŸ”Œ Logic Gates Simulator</button>
            <button class="tool-btn" id="_auto_103">âš™ï¸ System Design</button>
            <button class="tool-btn" id="_auto_104">ğŸ’» Code Study</button>
            <button class="tool-btn" id="_auto_105">ğŸš€ Project Log</button>
        </div>
        <!-- Medical Sub-Menu View -->
        <div id="tmpl-med-view" style="display:none;">
            <button class="tool-btn" id="_auto_106"
                style="background:#eee; margin-bottom:5px; justify-content: center;">â—€ Back to Main</button>
            <button class="tool-btn" id="_auto_107">ğŸ§  Anatomy Sheet</button>
            <button class="tool-btn" id="_auto_108">ğŸ¥ Disease Profile</button>
            <button class="tool-btn" id="_auto_109">ğŸ’Š Drug Monograph</button>
            <button class="tool-btn" id="_auto_110">ğŸ¦µ Physiotherapy Case</button>
            <button class="tool-btn" id="_auto_111">ğŸ§¬ Pathway Breakdown</button>
            <button class="tool-btn" id="_auto_112">ğŸ§ª Lab Interpretation</button>
        </div>
        <!-- Dentistry Sub-Menu View -->
        <div id="tmpl-dentistry-view" style="display:none;">
            <button class="tool-btn" id="_auto_113"
                style="background:#eee; margin-bottom:5px; justify-content: center;">â—€ Back to Main</button>
            <button class="tool-btn" id="_auto_114">ğŸ¦· Dental Anatomy</button>
            <button class="tool-btn" id="_auto_115">ğŸ§¬ Oral Pathology</button>
            <button class="tool-btn" id="_auto_116">ğŸ› ï¸ Procedure</button>
            <button class="tool-btn" id="_auto_117">ğŸ§¾ Dental Case</button>
            <button class="tool-btn" id="_auto_118">ğŸ¦· Prostho Plan</button>
            <button class="tool-btn" id="_auto_119">ğŸ¦  Endo Case</button>
            <button class="tool-btn" id="_auto_120">ğŸª¥ Perio Case</button>
            <button class="tool-btn" id="_auto_121">ğŸ©» Oral Radiology</button>
        </div>
        <!-- Engineering Sub-Menu View -->
        <div id="tmpl-eng-view" style="display:none;">
            <button class="tool-btn" id="_auto_122"
                style="background:#eee; margin-bottom:5px; justify-content: center;">â—€ Back to Main</button>
            <button class="tool-btn" id="_auto_123">ğŸ“ Problem Solution</button>
            <button class="tool-btn" id="_auto_124">âš¡ Circuit Analysis</button>
            <button class="tool-btn" id="_auto_125">âš™ï¸ Mechanical System</button>
            <button class="tool-btn" id="_auto_126">ğŸ— Structural Analysis</button>
            <button class="tool-btn" id="_auto_127">ğŸ› Control System</button>
            <button class="tool-btn" id="_auto_128">ğŸ­ Process Flow</button>
            <button class="tool-btn" id="_auto_129">ğŸ§ª Lab Experiment</button>
        </div>
        <button class="tool-btn" id="_auto_130" style="margin-top: 10px; background: #eee;">Close</button>
    </div>
    <div class="toast" id="toast">Action Successful!</div>
    <!-- Do Not Disturb Overlay -->
    <div class="dnd-overlay" id="dndOverlay">
        <div class="dnd-message">ğŸ… Focus Mode Active</div>
        <div class="dnd-timer" id="dndTimer">25:00</div>
        <div class="dnd-subtitle">Stay focused! All tools are locked.</div>
        <button class="dnd-exit-btn" id="_auto_131">â¸ï¸ Exit Focus</button>
    </div>
    <!-- MY REFERENCES MODAL -->
    <div class="ref-modal-overlay" id="refModalOverlay">
        <div class="ref-modal">
            <div class="ref-modal-header">
                <div class="ref-modal-title" id="refModalTitle">New Reference</div>
                <button class="ref-modal-close" id="_auto_132">Ã—</button>
            </div>
            <div class="ref-modal-body" id="refModalBody"></div>
            <div class="ref-modal-footer" id="refModalFooter"></div>
        </div>
    </div>
    <!-- Circuit components functionality is in script.js -->
</body>

</html>